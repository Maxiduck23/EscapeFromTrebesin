{% extends "main/base.html" %}
{% load static %}

{% block title %}Rezervace | Escape From Třebešín{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/booking.css' %}">
{% endblock %}

{% block content %}
<div class="booking-page">
    <div class="booking-container">
        <div class="booking-header">
            <h1>Rezervace únikové hry</h1>
            <p>Vyberte si místnost, datum a čas pro váš nezapomenutelný zážitek</p>
        </div>
        
        <div class="booking-form-container">
            <!-- Progress Bar -->
            <div class="booking-progress">
                <div class="progress-steps">
                    <div class="progress-step active" id="step-1">
                        <div class="step-number"><span>1</span></div>
                        <div class="step-label">Výběr místnosti</div>
                    </div>
                    <div class="progress-step" id="step-2">
                        <div class="step-number"><span>2</span></div>
                        <div class="step-label">Datum a čas</div>
                    </div>
                    <div class="progress-step" id="step-3">
                        <div class="step-number"><span>3</span></div>
                        <div class="step-label">Osobní údaje</div>
                    </div>
                    <div class="progress-step" id="step-4">
                        <div class="step-number"><span>4</span></div>
                        <div class="step-label">Potvrzení</div>
                    </div>
                </div>
            </div>
            
            <!-- Booking Content -->
            <div class="room-selection">
                {% for room in escape_rooms %}
                <div class="room-option" data-room-id="{{ room.id_escape_room }}" data-price="{{ room.cena }}">
                    <div class="room-image" style="background-image: url('{% static 'img/' %}{{ room.tema }}');"></div>
                    <h3 class="room-name">{{ room.nazev }}</h3>
                    <div class="room-info">
                        <div class="room-difficulty">{{ room.obtiznost }}</div>
                        <div class="room-price">{{ room.cena }} Kč</div>
                    </div>
                    <div class="room-features">
                        <div class="room-feature">💀 {{ room.strasidelnost }}</div>
                        <div class="room-feature">👶 {{ room.doporuceny_vek }}</div>
                    </div>
                </div>
                {% endfor %}
            </div>            
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loading-overlay">
    <div class="loading-spinner"></div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    window.bookingUrls = {
        getAvailableSlots: "{% url 'booking:get_available_slots' %}",
        bookingSubmit: "{% url 'booking:booking' %}",
        csrfToken: "{{ csrf_token }}"
    };
</script>
<script src="{% static 'js/booking.js' %}"></script>
{% endblock %}
